"use strict";var AFFLUENT=function(){var e,t={"7eer.net":"subId2","anrdoezrs.net":"sid","billing.purevpn.com":"data2","dpbolvw.net":"sid","evyy.net":"subId2","izettle.go2cloud.org":"aff_sub2","jdoqocy.com":"sid","kqzfj.com":"sid","ojrq.net":"subId2","partners.hostgator.com":"subId2","pepperjamnetwork.com":"sid","pxf.io":"subId2","shareasale.com":"afftrack","sjv.io":"subId2","tkqlhce.com":"sid","tqlkg.com":"sid","ubertrk.com":"subId2","wixstats.com":"s2","www.awin1.com":"clickref","xrte.net":"subId2","zvbf.net":"subId2","track.webgains.com":"clickref","prf.hn":"pubref"},n={"daum.net":"daum","eniro.se":"eniro ","naver.com":"naver ","yahoo.com":"yahoo","msn.com":"msn","bing.com":"live","aol.com":"aol","lycos.com":"lycos","ask.com":"ask","altavista.com":"altavista","search.netscape.com":"netscape","cnn.com":"cnn","about.com":"about","mamma.com":"mama","alltheweb.com":"alltheweb","voila.fr":"voila","search.virgilio.it":"virgilio","baidu.com":"baidu","alice.com":"alice","yandex.com":"yandex","najdi.org.mk":"najdi","seznam.cz":"seznam","search.com":"search","wp.pl":"wirtulana polska","online.onetcenter.org":"o*net","szukacz.pl":"szukacz","yam.com":"yam","pchome.com":"pchome","kvasir.no":"kvasir","sesam.no":"sesam","ozu.es":"ozu ","terra.com":"terra","mynet.com":"mynet","ekolay.net":"ekolay","rambler.ru":"rambler",google:"google"},r={cc:"utm_content",ck:"utm_term",cn:"utm_campaign",gclid:"gclid",dclid:"dclid",cm:"utm_medium",cs:"utm_source"};function s(t,n,r){Object.keys(n).length||c(window.location.search.substring(1),n);var s=n[r];s&&(e[t]=s,u(t,s))}function c(e,t){e&&e.split("&").forEach(function(e){var n=e.split("=");t[n[0]]=n[1]})}function o(n){var r,s=n.target||n.srcElement;if("A"===s.tagName){var o,d=s.getAttribute("href"),u=0,m="sid";for(var l in t)if(-1!==d.indexOf(l)){e.sid=a(),r=void 0,(r=i()).open("POST","https://us-central1-affluent-data-capture.cloudfunctions.net/data-capture",!0),r.setRequestHeader("Content-Type","Application/json"),r.send(JSON.stringify(e)),m=t[l],"prf.hn"===l&&(u=1);break}if(!e.sid)return;if(u){var f=d.indexOf("/pubref:"),p=d.indexOf("/destination:"),v=d.indexOf("?"),b=`/pubref:${e.sid}`;o=-1===f?-1===p?-1!==v?"/"===d.substr(v-2,1)?`${d.substr(0,v-1)}${b}${d.substr(v)}`:`${d.substr(0,v)}${b}${d.substr(v)}`:"/"===d.substr(d.length-1,1)?`${d.substr(0,d.length-1)}${b}`:`${d.substr(0)}${b}`:`${d.substr(0,p)}${b}${d.substr(p)}`:-1!==p?`${d.substr(0,f)}${b}${d.substr(p)}`:v?`${d.substr(0,f)}${b}${d.substr(v)}`:`${d.substr(0,f)}${b}${d.substr(p)}`}else{var h=d.indexOf("?");if(-1===h)o=d+="?"+m+"="+e.sid;else{var g={};c(d.substr(h+1),g),g[m]=e.sid;var y=[];for(var l in g)y.push(l+"="+g[l]);o=d.substr(0,h)+"?"+y.join("&")}}console.log(o),s.setAttribute("href",o),e.sid=void 0,setTimeout(function(){s.setAttribute("href",d)},300)}}function a(){for(var e="",t=0;t<3;t++)e+=Math.random().toString(36).slice(2);return e.substr(1,12)}function i(){var e;try{e=new ActiveXObject("Msxml2.XMLHTTP")}catch(t){try{e=new ActiveXObject("Microsoft.XMLHTTP")}catch(t){e=!1}}return e||"undefined"==typeof XMLHttpRequest||(e=new XMLHttpRequest),e}function d(e){var t=("; "+document.cookie).split("; "+e+"=");if(2==t.length)return t.pop().split(";").shift()}function u(e,t){if(t){var n=new Date;n.setTime(n.getTime()+2592e6);var r="expires="+n.toUTCString(),s=document.domain.split(".").reverse().splice(0,2).reverse().join(".");document.cookie=e+"="+t+";"+r+";domain=."+s+";path=/"}}function m(e){if(e){var t=document.createElement("a");t.href=e;try{return t.hostname.match(/[^.]*\.[^.]{2,3}(?:\.[^.]{2,3})?$/)[0]}catch(e){return}}}return{init:function(c,a,l){var f;e={websiteId:String(c),userId:a,uri:document.location.href,cid:""},function t(n){var r=d("_ga");r?(e.cid=r.substr(6),console.log("CID: "+e.cid)):n&&setTimeout(function(){t(n-1)},2e3)}(3),(f=i()).open("GET","https://us-central1-affluent-data-capture.cloudfunctions.net/DataCapturePatterns?userId="+e.userId,!0),f.onreadystatechange=function(){if(4==f.readyState&&f.status>=200&&f.status<400)try{var e=JSON.parse(f.responseText);e.forEach(function(e){t[e.base_url]=e.sid})}catch(e){console.error(e)}},f.send(),l&&(function(){var t=i();t.open("GET","https://api.ipify.org/",!0),t.onreadystatechange=function(){4==t.readyState&&t.status>=200&&t.status<400&&(e.ip=t.responseText)},t.send()}(),function(){var t={},c=""===document.referrer?void 0:document.referrer,o=c?c.split("?"):void 0,a=o?o.shift():void 0;for(var i in r)s(i,t,r[i]);if(e.gclid)e.cs="google",e.cm="cpc",u("cs",e.cs),u("cm",e.cm),c&&-1===c.indexOf(window.location.hostname)&&(e.dr=c,u("dr",e.dr));else if(e.dclid)e.cs="google",e.cm="cpm",u("cs",e.cs),u("cm",e.cm),c&&-1===c.indexOf(window.location.hostname)&&(e.dr=c,u("dr",e.dr));else if(c&&-1===c.indexOf(window.location.hostname)){var l=0;for(var f in n)-1!=a.indexOf(f)&&(e.cs=n[f],e.cm="organic",e.dr=c,u("cs",e.cs),u("cm",e.cm),u("dr",e.dr),l=1);l||(e.cm="referral",e.dr=c,u("cm",e.cm),u("dr",e.dr),m(c)&&(e.cs=m(c),u("cs",e.dr)))}else{for(var p in r)e[p]=d(p);e.dr=d("dr"),e.dr||(e.cs="(direct)",e.cm="(none)",u("cs",e.cs),u("cm",e.cm))}}()),document.addEventListener?(document.addEventListener("click",o),document.addEventListener("contextmenu",o)):document.attachEvent&&(document.attachEvent("onclick",o),document.addEventListener("contextmenu",o))}}}();